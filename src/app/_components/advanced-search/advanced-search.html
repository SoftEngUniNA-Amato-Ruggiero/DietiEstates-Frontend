<form [formGroup]="searchForm" class="d-flex flex-column gap-3">

    <app-map-component [inputLayer]="searchResultsLayerGroup"
        (mapCenter)="searchForm.patchValue({ center: $event })"></app-map-component>
    <br />

    <mat-radio-group aria-labelledby="insertion type" formControlName="insertionType">
        @for (type of insertionTypes; track type) {
        <mat-radio-button [value]="type">{{type}}</mat-radio-button>
        }
    </mat-radio-group>


    @if (searchForm.get('insertionType')?.value === insertionTypes[1]) { <!-- For Sale -->
    <mat-form-field class="container-fluid">
        <mat-label>Maximum Price (€)</mat-label>
        <input matInput type="number" formControlName="maxPrice" min="0" step="1000">
    </mat-form-field>
    } @else if (searchForm.get('insertionType')?.value === insertionTypes[2]) { <!-- For Rent -->
    <mat-form-field class="container-fluid">
        <mat-label>Maximum Rent (€)</mat-label>
        <input matInput type="number" formControlName="maxRent" min="0" step="100">
    </mat-form-field>
    }

    <div ngbAccordion class="container p-3">
        <div ngbAccordionItem>
            <h2 ngbAccordionHeader>
                <button ngbAccordionButton>Advanced Search</button>
            </h2>
            <div ngbAccordionCollapse>
                <div ngbAccordionBody>

                    <mat-form-field class="container-fluid">
                        <mat-label>Search Radius (degrees)</mat-label>
                        <input matInput type="number" formControlName="distance" min="0.1" step="0.1">
                    </mat-form-field>

                    <app-tags-field (tags)="reactiveKeywords.set($event)"></app-tags-field>

                    <mat-form-field class="container-fluid">
                        <mat-label>Minimum Size (m²)</mat-label>
                        <input matInput type="number" formControlName="minSize" min="0" step="1">
                    </mat-form-field>

                    <mat-form-field class="container-fluid">
                        <mat-label>Minimum Number of Rooms</mat-label>
                        <input matInput type="number" formControlName="minNumberOfRooms" min="0" step="1">
                    </mat-form-field>

                    <mat-form-field class="container-fluid">
                        <mat-label>Maximum Floor</mat-label>
                        <input matInput type="number" formControlName="maxFloor" min="0" step="1">
                    </mat-form-field>

                    <mat-checkbox formControlName="hasElevator">Has Elevator</mat-checkbox>


                    <br />

                    <button (click)="onSaveSearch()" class="btn btn-primary m-3">Save search</button>
                </div>
            </div>
        </div>


    </div>
</form>

<br />