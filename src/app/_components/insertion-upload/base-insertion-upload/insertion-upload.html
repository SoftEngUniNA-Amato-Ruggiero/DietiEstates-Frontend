<form [formGroup]="insertionForm" class="d-flex flex-column gap-3">
    <div>
        <p>Select a location on the map:</p>
        <app-map-component [inputLayer]="clickMarkerLayer" (placeSelected)="onPlaceSelected($event)"
            (clickedAt)="onMapClicked($event)"></app-map-component>

        <br />

        <label for="address" class="form-label">Address:</label>
        @if(insertionForm.controls.address.value) {
        <div class="container border">
            <quill-view
                [content]="insertionForm.controls.address.value.features[0].properties!['formatted'] ?? 'ADDRESS NOT AVAILABLE'"></quill-view>
        </div>
        <br />
        }
    </div>

    <div>
        <label for="description" class="form-label">Description:</label>
        <quill-editor id="description" formControlName="description" class="form-control"></quill-editor>
    </div>

    <div class="d-flex flex-column">
        <label for="tags" class="form-label">Tags:</label>
        <mat-form-field>
            <mat-label>Enter a tag:</mat-label>
            <mat-chip-grid #reactiveChipGrid aria-label="Enter a tag" [formControl]="insertionForm.controls.tags">
                @for (keyword of reactiveKeywords(); track keyword) {
                <mat-chip-row (removed)="removeReactiveKeyword(keyword)">
                    {{keyword}}
                    <button matChipRemove [attr.aria-label]="'remove tag ' + keyword">
                        <mat-icon>cancel</mat-icon>
                    </button>
                </mat-chip-row>
                }
            </mat-chip-grid>
            <input placeholder="New tag..." [matChipInputFor]="reactiveChipGrid"
                (matChipInputTokenEnd)="addReactiveKeyword($event)" />
        </mat-form-field>
    </div>
</form>